# ๐ Khutbahs API

API ูุฅุฏุงุฑุฉ ูุงุณุชุนุฑุงุถ ุงูุฎุทุจ ุงูุฅุณูุงููุฉ ูู ูุงุนุฏุฉ ุจูุงูุงุช ุชุดูู ุจูุงูุงุช ุงูุฎุทุจ ูุงููุฑููุงุช ุงููุฑุชุจุทุฉ ุจูุง.

![repository-open-graph-template](https://github.com/user-attachments/assets/a74efcdd-9a36-40e7-9b8d-53088d515fc2)


## ๐ ูููู ุงููุดุฑูุน

```bash
.
โโโ database                   # ูุฌูุฏ ูุญุชูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ files                  # ุงููุฑููุงุช ูุซู ูููุงุช ุงูู PDF ู DOC
โ   โ   โโโ (ุฅูููููู_ููุงุฏูุญู_ุฅูููู_ุฑูุจูููู_ููุฏูุญูุง_ููููููุงููููู).doc
โ   โ   โโโ (ุฅูููููู_ููุงุฏูุญู_ุฅูููู_ุฑูุจูููู_ููุฏูุญูุง_ููููููุงููููู).pdf
โ   โ   โโโ ...                # ูููุงุช ุฃุฎุฑู
โ   โโโ khutbahs_details       # ูููุงุช JSON ููู ุฎุทุจุฉ
โ   โ   โโโ ุงุจุชูุงุก-ุงูุฃูุจูุงุก-ูุฃุชุจุงุนูู-.json
โ   โ   โโโ ...                # ูููุงุช ุฎุทุจ ุฃุฎุฑู
โ   โโโ khutbahs_main_data.json # ููู JSON ุงูุฑุฆูุณู ุงูุฐู ูุญุชูู ุนูู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ ููู ุฎุทุจุฉ
โโโ scripts                    # ุณูุฑุจุชุงุช ูุฌูุจ ูุชูุธูู ุงูุจูุงูุงุช
โ   โโโ cleanJsonFile.mjs      # ุณูุฑุจุช ูุชูุธูู ุจูุงูุงุช JSON
โ   โโโ khutabaDataScraper.mjs # ุณูุฑุจุช ูุฌูุจ ุจูุงูุงุช ุงูุฎุทุจ
โ   โโโ posts_category.mjs     # ุณูุฑุจุช ูุฌูุจ ุจูุงูุงุช ุงููุฆุงุช
โโโ src                        # ูููุงุช ุงููุดุฑูุน ุงูุฑุฆูุณูุฉ
โ   โโโ public                 # ุงููููุงุช ุงูุซุงุจุชุฉ 
โ   โโโ controllers            # ูููุงุช ุงูุชุญูู (Controllers)
โ   โโโ routes                 # ูููุงุช ุงููุณุงุฑุงุช (Routes)
โ   โโโ services               # ุงูุฎุฏูุงุช ูุงูุนูููุงุช ุงูุฑุฆูุณูุฉ (Services)
โ   โโโ index.mjs              # ููู ุชุดุบูู ุงูุชุทุจูู ุงูุฑุฆูุณู
โโโ .env                       # ููู ุงูุจูุฆุฉ (Environment Variables)
โโโ package.json               # ููู ุชููุฆุฉ ุงููุดุฑูุน
```

## ๐ ุชุดุบูู ุงููุดุฑูุน

ูุชุดุบูู ุงููุดุฑูุน ูุญูููุงุ ุงุชุจุน ุงูุฎุทูุงุช ุงูุชุงููุฉ:

1. ูู ุจุงุณุชูุณุงุฎ ุงููุดุฑูุน:

    ```bash
    git clone https://github.com/rn0x/khutbahs-api.git
    ```

2. ุซุจูุช ุงูุญุฒู ุงููุทููุจุฉ:

    ```bash
    npm install
    ```

3. ูู ุจุชุดุบูู ุงูุฎุงุฏู:

    ```bash
    npm start
    ```

ุงูู API ุณูุนูู ุงูุขู ุนูู `http://localhost:3000`.

## ๐ ุชุดุบูู ุงููุดุฑูุน ุจุงุณุชุฎุฏุงู Docker

### 1. **ุจูุงุก ุตูุฑุฉ Docker**

ูุจูุงุก ุตูุฑุฉ Docker ููุดุฑูุนูุ ุงุณุชุฎุฏู ุงูุฃูุฑ ุงูุชุงูู ูู ูุฌูุฏ ุงููุดุฑูุน ุญูุซ ูุชูุงุฌุฏ `Dockerfile`:

```bash
docker build -t khutbahs-api .
```

- `khutbahs-api` ูู ุงุณู ุงูุตูุฑุฉ ุงูุฐู ุณูุชู ุฅูุดุงุคู. ููููู ุชุบููุฑ ุงูุงุณู ููุง ุชุฑูุฏ.

### 2. **ุชุดุบูู ุงูุญุงููุฉ**

ุจุนุฏ ุจูุงุก ุงูุตูุฑุฉุ ูู ุจุชุดุบูู ุงูุญุงููุฉ ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ:

```bash
docker run -d -p 3000:3000 --name khutbahs-container khutbahs-api
```

- `-d` ูุชุดุบูู ุงูุญุงููุฉ ูู ูุถุน ุงูุฎูููุฉ.
- `-p 3000:3000` ูุชูุฌูู ุงููููุฐ 3000 ูู ุงูุญุงููุฉ ุฅูู ุงููููุฐ 3000 ุนูู ุงููุถูู.
- `--name khutbahs-container` ูุชุณููุฉ ุงูุญุงููุฉ.
- `khutbahs-api` ูู ุงุณู ุงูุตูุฑุฉ ุงูุชู ุชู ุฅูุดุงุคูุง.

### 3. **ุงูุชุญูู ูู ุชุดุบูู ุงูุชุทุจูู**

ููููู ุงูุชุญูู ูู ุฃู ุงูุชุทุจูู ูุนูู ุจุดูู ุตุญูุญ ูู ุฎูุงู ุฒูุงุฑุฉ:

[http://localhost:3000](http://localhost:3000)

### 4. **ุฅููุงู ุงูุญุงููุฉ**

ูุฅููุงู ุงูุญุงููุฉุ ุงุณุชุฎุฏู ุงูุฃูุฑ:

```bash
docker stop khutbahs-container
```

### 5. **ุญุฐู ุงูุญุงููุฉ**

ูุญุฐู ุงูุญุงููุฉ ุจุนุฏ ุฅููุงููุงุ ุงุณุชุฎุฏู ุงูุฃูุฑ:

```bash
docker rm khutbahs-container
```

## ๐ API ุงูุชูุซูู

### ๐๏ธ ุฌูุจ ูู ุงูุฎุทุจ (ูุน ุฏุนู ุงูู Pagination)

**ุงููุตู:** ุฌูุจ ุจูุงูุงุช ุงูุฎุทุจ ุงูุฑุฆูุณูุฉ ูุน ุฏุนู ุงูุชูุณูู ุฅูู ุตูุญุงุช.

- **ุงูุทูุจ:** `GET /api`
- **ุงููุนููุงุช:**
  - `page` (ุงุฎุชูุงุฑู): ุฑูู ุงูุตูุญุฉ (ุงูุชุฑุงุถููุง 1)
  - `limit` (ุงุฎุชูุงุฑู): ุนุฏุฏ ุงูุนูุงุตุฑ ููู ุตูุญุฉ (ุงูุชุฑุงุถููุง 20)
  
- **ุงูุงุณุชุฌุงุจุฉ:**
  ```json
  {
    "khutbahs": [ ... ],
    "totalItems": 4531,
    "currentPage": 1,
    "totalPages": 227,
    "itemsPerPage": 20
  }
  ```

### ๐ ุฌูุจ ุชูุงุตูู ุฎุทุจุฉ ูุนููุฉ

**ุงููุตู:** ุฌูุจ ุงูุชูุงุตูู ุงููุงููุฉ ูุฎุทุจุฉ ูุนููุฉ ุจุงุณุชุฎุฏุงู ุงูู `slug`.

- **ุงูุทูุจ:** `GET /api/:slug`
- **ุงููุนููุงุช:**
  - `slug`: ูุนุฑู ุงูุฎุทุจุฉ ุงููุฑูุฏ ูู ุงูู URL

- **ุงูุงุณุชุฌุงุจุฉ:**
  ```json
  {
    "id": 2147,
    "title": "ุงูุฌูุฉ ุฏุงุฑ ุงููุฑุงูุฉ",
    "slug": "ุงูุฌูุฉ-ุฏุงุฑ-ุงููุฑุงูุฉ",
    "author": {
      "name_prefix": "ุงูุดูุฎ",
      "first_name": "ุนุจุฏุงูุนุฒูุฒ",
      "last_name": "ุจู ูุญูุฏ ุงููุบููุดู"
    },
    "rawContent": "ุนูุงุตุฑ ุงูุฎุทุจุฉ\n...",
    "htmlContent": "<div>...</div>",
    "attachments": [ ... ],
    "mainCategories": [ ... ],
    "subCategories": [ ... ],
    "url": "https://khutabaa.com/ar/article/ุงูุฌูุฉ-ุฏุงุฑ-ุงููุฑุงูุฉ"
  }
  ```

### ๐ ุฌูุจ ูุฑููุงุช ุฎุทุจุฉ ูุนููุฉ

**ุงููุตู:** ุฌูุจ ุฌููุน ุงููุฑููุงุช (ูุซู ูููุงุช ุงูู PDF ู DOC) ุงููุฑุชุจุทุฉ ุจุฎุทุจุฉ ูุนููุฉ.

- **ุงูุทูุจ:** `GET /api/:slug/attachments`
- **ุงููุนููุงุช:**
  - `slug`: ูุนุฑู ุงูุฎุทุจุฉ ุงููุฑูุฏ ูู ุงูู URL

- **ุงูุงุณุชุฌุงุจุฉ:**
  ```json
  [
    {
      "name": "ุงูุฌูุฉ_ุฏุงุฑ_ุงููุฑุงูุฉ.doc",
      "path": "/database/files/ุงูุฌูุฉ_ุฏุงุฑ_ุงููุฑุงูุฉ.doc",
      "link": "https://khutabaa.com/article/.../download-file/380956"
    },
    {
      "name": "ุงูุฌูุฉ_ุฏุงุฑ_ุงููุฑุงูุฉ.pdf",
      "path": "/database/files/ุงูุฌูุฉ_ุฏุงุฑ_ุงููุฑุงูุฉ.pdf",
      "link": "https://khutabaa.com/article/.../download-file/380957"
    }
  ]
  ```

## ๐ ููุงุญุธุงุช

- ุงุณุชุฎุฏู `Postman` ุฃู ุฃู ุฃุฏุงุฉ ุฃุฎุฑู ูุงุฎุชุจุงุฑ ุงูู API.
- ููููู ุชุฎุตูุต ุนุฏุฏ ุงูุนูุงุตุฑ ูู ูู ุตูุญุฉ ุนุจุฑ ุชูุฑูุฑ ูุนููุฉ `limit` ูู ุทูุจ ุงูุฌูุจ.

---

โจ **ุชู ุจูุงุก ูุฐุง ุงููุดุฑูุน ุจุงุณุชุฎุฏุงู:**

- Node.js
- Express.js
- File System (FS) ูุฅุฏุงุฑุฉ ุงููููุงุช


## ๐ ูุตุฏุฑ ุงูุจูุงูุงุช
ุชู ุจูุงุก ุงูููุดุทุฉ (scraper) ุงูุฎุงุตุฉ ุจุงููุดุฑูุน ูุฌูุจ ุงูุจูุงูุงุช ูู ูููุน [ููุชูู ุงูุฎุทุจุงุก](https://khutabaa.com/)ุ ููู ูููุน ูุญุชูู ุนูู ูุฌููุนุฉ ูุงุณุนุฉ ูู ุงูุฎุทุจ ุงูุฅุณูุงููุฉ. ุชุชุถูู ุงูุจูุงูุงุช ุงูุชู ูุชู ุฌูุนูุง ุชูุงุตูู ุงูุฎุทุจุฉุ ุงููุฑููุงุช ูุซู ูููุงุช PDF ู DOCุ ูุงูุชุตูููุงุช ุงููุชุนููุฉ ุจูู ุฎุทุจุฉ.


## ๐ ุงูุชุฑุฎูุต

ูุชู ุชุฑุฎูุต ูุฐุง ุงููุดุฑูุน ุชุญุช **ุชุฑุฎูุต MIT**. ููููู ุงุณุชุฎุฏุงู ุงูููุฏ ูุชุนุฏููู ูุชูุฒูุนู ููููุง ูุดุฑูุท ุงูุชุฑุฎูุต.
